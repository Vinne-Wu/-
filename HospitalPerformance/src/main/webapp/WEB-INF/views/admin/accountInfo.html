<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=emulateIE7" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="/static/iform/css/style.css" />
    <link rel="stylesheet" type="text/css" href="/static/iform/css/WdatePicker.css" />
    <link rel="stylesheet" type="text/css" href="/static/iform/css/skin_/table.css" />
    <link rel="stylesheet" type="text/css" href="/static/iform/css/jquery.grid.css" />
    <script src="/static/assets/js/jquery-1.11.1.min.js"></script>
    <script src="/static/assets/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/static/assets/bootstrap/css/bootstrap.min.css">
</head>

<body>
<div id="container">
    <div id="hd"></div>
    <div id="bd">
        <div id="main">
            <div class="search-box ue-clear">
                <div class="search-area">
                    <div class="kv-item ue-clear">
                        <div class="kv-item ue-clear">
                            <span class="choose">
                                <label>账号:</label>
                                <div class="kv-item-content">
                                    <input type="text" placeholder="请输入要查询的账号"  style="width: 85%"/>
                                </div>
                            </span>

                            <span class="choose">
                                <label>年份:</label>
                                <div class="kv-item-content">
                                    <select>
                                        <option>2019年</option>
                                        <option selected="selected">2020年</option>
                                        <option>2021年</option>
                                    </select>
                                </div>
                            </span>

                            <span  class="choose" id="khyf">
                                <label>月份:</label>
                                <div class="kv-item-content">
                                    <select id="khyfs">
                                        <option value=1>1月</option>
                                        <option value=2>2月</option>
                                        <option selected="selected" value=3>3月</option>
                                        <option value=4>4月</option>
                                        <option value=5>5月</option>
                                        <option value=6>6月</option>
                                        <option value=7>7月</option>
                                        <option value=8>8月</option>
                                        <option value=9>9月</option>
                                        <option value=10>10月</option>
                                        <option value=11>11月</option>
                                        <option value=12>12月</option>
                                    </select>
                                </div>
                            </span>

                            <span  class="choose" id="khrq">
                                <label>考核日期:</label>
                                <div class="kv-item-content">
                                    <select id="khrqs">
                                        <option value=9>9</option>
                                    </select>
                                </div>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="search-button">
                    <input class="button" type="button" value="查询" />
                </div>
            </div>

            <div class="table">
                <div class="opt ue-clear">
                	<span class="sortarea">
                    	<span class="sort">
                        	<label>排序：</label>
                            <span class="name">
                            	<i class="icon"></i>
                                <span class="text">名称</span>
                            </span>
                        </span>

                        <i class="list"></i>
                        <i class="card"></i>
                    </span>
                    <span class="optarea">
                        <a href="javascript:;" class="delete" data-toggle="modal" data-target="#delModal">
                            <i class="icon"></i>
                            <span class="text">删除</span>
                        </a>

                        <a href="javascript:;" class="config" data-toggle="modal" data-target="#addModal">
                            <i class="icon"></i>
                            <span class="text">详情</span>
                        </a>
                    </span>
                </div>

                <div>
                    <table class="table table-bordered table-hover">
                        <thead style="background-color:#f6f6f6">
                        <tr>
                            <th>编号</th>
                            <th>用户邮箱</th>
                            <th>用户</th>
                            <th>年龄</th>
                            <th>性别</th>
                            <th>联系方式</th>
                            <th>申请日期</th>
                            <th>激活状态</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody id="tableData">
<!--                        <tr>-->
<!--                            <td>1</td>-->
<!--                            <td>user@qq.com</td>-->
<!--                            <td>张三</td>-->
<!--                            <td>25</td>-->
<!--                            <td>男</td>-->
<!--                            <td>18375331668</td>-->
<!--                            <td>2020-05-06</td>-->
<!--                            <td>待激活</td>-->
<!--                            <td><a href="#">停用</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#">编辑</a></td>-->
<!--                        </tr>-->
                        </tbody>
                    </table>
                </div>

                <div class="pagination"></div>
            </div>
        </div>
    </div>
</div>

<!-- 用户新增弹出框 start -->
<div style="display: none" class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    用户信息编辑
                </h4>
            </div>

            <div class="modal-body">
                <div class="kv-item ue-clear">
                    <label><span class="impInfo">*</span>邮箱</label>
                    <div class="kv-item-content">
                        <input type="text" placeholder="130@qq.com" disabled="disabled" />
                    </div>
                </div>

                <div class="kv-item ue-clear">
                    <label><span class="impInfo">*</span>用户名</label>
                    <div class="kv-item-content">
                        <input type="text" placeholder="关羽" />
                    </div>
                </div>
                <div class="kv-item ue-clear">
                    <label><span class="impInfo">*</span>年龄</label>
                    <div class="kv-item-content">
                        <input type="text" placeholder="25" />
                    </div>
                </div>
                <div class="kv-item ue-clear">
                    <label><span class="impInfo">*</span>性别</label>
                    <div class="kv-item-content">
                        <input type="text" placeholder="男" />
                    </div>
                </div>
                <div class="kv-item ue-clear">
                    <label><span class="impInfo">*</span>联系方式</label>
                    <div class="kv-item-content">
                        <input type="text" placeholder="12345678902" />
                    </div>
                </div>
                <div class="kv-item ue-clear">
                    <label><span class="impInfo">*</span>学历</label>
                    <div class="kv-item-content">
                        <select>
                            <option>大专</option>
                            <option>本科</option>
                            <option>硕士</option>
                        </select>
                    </div>
                </div>
                <div class="kv-item ue-clear">
                    <label><span class="impInfo">*</span>职称</label>
                    <div class="kv-item-content">
                        <select>
                            <option>初级</option>
                            <option>中级</option>
                            <option>高级</option>
                        </select>
                    </div>
                </div>
                <div class="kv-item ue-clear">
                    <label><span class="impInfo">*</span>科室</label>
                    <div class="kv-item-content">
                        <select>
                            <option>护理科</option>
                            <option>门诊科</option>
                        </select>
                    </div>
                </div>
                <div class="kv-item ue-clear">
                    <label><span class="impInfo">*</span>岗位</label>
                    <div class="kv-item-content">
                        <select>
                            <option>护士</option>
                            <option>医生</option>
                        </select>
                    </div>
                </div>
                <div class="kv-item ue-clear time">
                    <label><span class="impInfo">*</span>工作时间</label>
                    <div class="kv-item-content">
                        <input type="text" onfocus="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss'})" />
                        <i class="time-icon"></i>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                </button>
                <button type="button" class="btn btn-primary">
                    激活
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<!-- 用户新增弹出框 end -->

<!-- 用户删除弹出框 start -->
<div style="display: none" class="modal fade" id="delModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title">
                    用户删除
                </h4>
            </div>

            <div class="modal-body">
                <div class="kv-item ue-clear">
                    <label><span class="impInfo">*</span>用户名：</label>
                    <div class="kv-item-content">
                        <input type="text" placeholder="曹操" disabled="disabled" />
                    </div>
                </div>

                <div class="kv-item ue-clear">
                    <label><span class="impInfo">*</span>邮箱：</label>
                    <div class="kv-item-content">
                        <input type="text" placeholder="160@qq.com" />
                    </div>
                </div>

                <div class="kv-item ue-clear">
                    确定删除该用户么？
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消
                </button>
                <button type="button" class="btn btn-primary">
                    确定
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<!-- 用户删除弹出框 end -->

</body>
<script type="text/javascript" src="/static/iform/js/jquery.js"></script>
<script type="text/javascript" src="/static/iform/js/global.js"></script>
<script type="text/javascript" src="/static/iform/js/jquery.select.js"></script>
<script type="text/javascript" src="/static/iform/js/core.js"></script>
<script type="text/javascript" src="/static/iform/js/jquery.pagination.js"></script>
<script type="text/javascript" src="/static/iform/js/jquery.grid.js"></script>
<script type="text/javascript" src="/static/iform/js/WdatePicker.js"></script>
<script type="text/javascript">
    //表单数据
    $('select').select();
    var head = [];
    var tbody = []
    // 模拟异步
    setTimeout(function(){
        $('.grid').Grid('setData',tbody, head);
    },2000);

    $('.pagination').pagination(100,{
        callback: function(page){
            alert(page);
        },
        display_msg: false
    });

    $('.search-box input[type=radio]').click(function(e) {
        if($(this).prop('checked')){
            if($(this).attr('data-define') === 'define'){
                $('.define-input').show();
            }else{
                $('.define-input').hide();
            }
        }
    });

    /**
     * 加载考核日期
     */
    function loadDays() {
        let curDate = new Date();
        let day = curDate.getDate();
        let curMonth = $("#khyfs").val();
        curDate.setMonth(curMonth);
        curDate.setDate(0);
        //加载数据
        $("#khrqs").empty();
        for (let i=1;i<=curDate.getDate();i++){
            if (i == day){
                $("#khrqs").append("<option value="+i+" selected='selected'>"+i+"</option>");
            }else{
                $("#khrqs").append("<option value="+i+" >"+i+"</option>");
            }
        }
        // 展示
        $("#khrq").css("display","");
    }

    /**
     * 初始化
     */
    $(document).ready(function() {
        loadDays();

        getAccountInfo();
    });

    /**
     *  获取注册账户信息
     */
    function getAccountInfo() {
        $.ajax({
            type: "POST",
            url:"/admin/getAccountInfo",
            dataType:'json',
            async: true,  // 注：ajax 同步情况下会阻塞一些js效果，比如页面跳转等等，所有注意同异步使用
            success: function(data) {
                let userList  = data.result.userList;
                let tableData = $("#tableData");
                // 先清空表格内容
                tableData.empty();
                $.each(userList,function (index,item) {
                    //激活状态+操作按钮
                    let state = '待激活';
                    let operate = '<td><a href="#">停用</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#">编辑</a></td>';
                    if(item.state == '1'){
                        state = '已激活';
                        operate = '<td><a href="#">停用</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#">编辑</a></td>';
                    }else if(item.state == '-1'){
                        state = '停用';
                        operate = '<td><a href="#">启用</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#">编辑</a></td>';
                    }
                    // 时间格式转换
                    let date = new Date(item.updateTime);

                    tableData.append('          <tr>\n' +
                        '                            <td>'+(index+1)+'</td>\n' +
                        '                            <td>'+item.email+'</td>\n' +
                        '                            <td>'+item.name+'</td>\n' +
                        '                            <td>*</td>\n' +
                        '                            <td>*</td>\n' +
                        '                            <td>'+item.phoneNum+'</td>\n' +
                        '                            <td>'+date.toLocaleDateString()+'</td>\n' +
                        '                            <td>'+state+'</td>\n' +
                        operate +
                        '                        </tr>');
                });
            },
            error: function() {
                alert("数据异常！");
            }
        });
    }

    /**
     *  编辑按钮
     */
    function editButton() {
        
    }

    /**
     * 启用按钮
     */
    function startButton() {

    }

    /**
     * 停用按钮
     */
    function stopButton() {
        
    }
</script>
</html>
